# Fix: NETSDK1004 - Assets File Not Found

## Error Message

```
Error NETSDK1004 : Assets file '/home/misa/RiderProjects/Sirefi/BlazorApp1/obj/project.assets.json' not found. 
Run a NuGet package restore to generate this file.
```

---

## What This Error Means

This error occurs when:
- ‚úÖ NuGet packages haven't been restored
- ‚úÖ The `project.assets.json` file is missing
- ‚úÖ You're trying to build before restoring dependencies

**This is NORMAL** when:
- First time opening the project
- After cloning the repository
- After cleaning the project
- After pulling changes that affect dependencies

---

## Quick Solution

### Step 1: Navigate to Project Directory
```bash
cd /home/misa/RiderProjects/Sirefi/BlazorApp1
```

### Step 2: Restore NuGet Packages
```bash
dotnet restore
```

**Expected Output**:
```
Determining projects to restore...
Restored /home/misa/RiderProjects/Sirefi/BlazorApp1/BlazorApp1.csproj (in X sec).
```

### Step 3: Build the Project
```bash
dotnet build
```

**Expected Output**:
```
Build succeeded.
    0 Warning(s)
    0 Error(s)
```

---

## Alternative: Use Your IDE

### Using Rider (JetBrains)
1. Right-click on `BlazorApp1` project in Solution Explorer
2. Select **"Restore NuGet Packages"**
3. Wait for completion (watch progress bar)
4. Build the project (Ctrl+Shift+F9 or ‚åò+Shift+F9)

### Using Visual Studio
1. Right-click on solution/project
2. Select **"Restore NuGet Packages"**
3. Wait for completion
4. Build (Ctrl+Shift+B or F6)

---

## If That Doesn't Work

### Option 1: Clean and Restore
```bash
cd /home/misa/RiderProjects/Sirefi/BlazorApp1

# Clean the project
dotnet clean

# Restore packages
dotnet restore

# Build
dotnet build
```

### Option 2: Clear NuGet Cache
```bash
# Clear all NuGet caches
dotnet nuget locals all --clear

# Navigate to project
cd /home/misa/RiderProjects/Sirefi/BlazorApp1

# Restore packages
dotnet restore

# Build
dotnet build
```

### Option 3: Nuclear Option (Clear Everything)
```bash
cd /home/misa/RiderProjects/Sirefi

# Remove all bin and obj folders
find . -type d -name "bin" -exec rm -rf {} + 2>/dev/null
find . -type d -name "obj" -exec rm -rf {} + 2>/dev/null

# Clear NuGet cache
dotnet nuget locals all --clear

# Restore both projects
cd BlazorApp1
dotnet restore

cd ../Sirefi
dotnet restore

# Build both projects
cd ../BlazorApp1
dotnet build

cd ../Sirefi
dotnet build
```

---

## Complete Setup (If Starting Fresh)

If you want to set up everything from scratch:

### 1. Backend (Sirefi)
```bash
cd /home/misa/RiderProjects/Sirefi/Sirefi

# Restore packages
dotnet restore

# Build
dotnet build

# Run (to test)
dotnet run
```

**Expected**: Backend starts on `http://localhost:5201`

### 2. Frontend (BlazorApp1)
```bash
cd /home/misa/RiderProjects/Sirefi/BlazorApp1

# Restore packages
dotnet restore

# Build
dotnet build

# Run (to test)
dotnet run
```

**Expected**: Frontend starts on `https://localhost:7070`

---

## Verification

After fixing the error, verify everything works:

### 1. Check Build Succeeds
```bash
cd /home/misa/RiderProjects/Sirefi/BlazorApp1
dotnet build
```

**Success**: No errors, shows "Build succeeded"

### 2. Check Project Assets File Exists
```bash
ls -la /home/misa/RiderProjects/Sirefi/BlazorApp1/obj/project.assets.json
```

**Success**: File exists and is not empty

### 3. Run the Application
```bash
# Start backend (terminal 1)
cd /home/misa/RiderProjects/Sirefi/Sirefi
dotnet run

# Start frontend (terminal 2)
cd /home/misa/RiderProjects/Sirefi/BlazorApp1
dotnet run
```

**Success**: Both apps start without errors

### 4. Test in Browser
Open: `https://localhost:7070`

**Success**: Login page loads with Google Sign-In button

---

## Why This Happens

### Technical Explanation

1. **NuGet Packages**:
   - .NET projects depend on external packages
   - These are listed in `.csproj` files
   - Not stored in repository (too large)

2. **project.assets.json**:
   - Generated by `dotnet restore`
   - Contains resolved dependency graph
   - Required for compilation
   - Not committed to git (in .gitignore)

3. **When You Need to Restore**:
   - After cloning repo
   - After `git pull` with dependency changes
   - After `dotnet clean`
   - After switching branches
   - After IDE regenerates project files

---

## Prevention

### Always Restore After:

‚úÖ **Cloning Repository**:
```bash
git clone <repo>
cd BlazorApp1
dotnet restore
```

‚úÖ **Pulling Changes**:
```bash
git pull
dotnet restore  # If dependencies changed
```

‚úÖ **Cleaning Project**:
```bash
dotnet clean
dotnet restore  # Always restore after clean
```

‚úÖ **Switching Branches**:
```bash
git checkout <branch>
dotnet restore  # If branch has different dependencies
```

### IDE Configuration

**Rider**: 
- Settings ‚Üí Build, Execution, Deployment ‚Üí NuGet
- Enable "Automatically restore NuGet packages on project load"

**Visual Studio**:
- Tools ‚Üí Options ‚Üí NuGet Package Manager
- Enable "Allow NuGet to download missing packages"

---

## Common Related Errors

### Error: "The SDK 'Microsoft.NET.Sdk.Web' specified could not be found"

**Solution**: Install .NET 9.0 SDK
```bash
# Check version
dotnet --version

# Should be 9.0.x
# If not, download from: https://dotnet.microsoft.com/download/dotnet/9.0
```

### Error: "A compatible .NET SDK was not found"

**Solution**: 
1. Install .NET 9.0 SDK
2. Or modify `global.json` to use installed version

### Error: "Package X is not compatible with net9.0"

**Solution**:
```bash
# Update package versions
dotnet add package <PackageName> --version <LatestVersion>

# Or remove and re-add
dotnet remove package <PackageName>
dotnet add package <PackageName>
```

---

## Quick Reference

### Essential Commands

| Command | Purpose |
|---------|---------|
| `dotnet restore` | Restore NuGet packages |
| `dotnet build` | Build the project |
| `dotnet clean` | Clean build outputs |
| `dotnet run` | Run the application |
| `dotnet nuget locals all --clear` | Clear NuGet cache |

### File Locations

| File | Purpose |
|------|---------|
| `BlazorApp1.csproj` | Project file (dependencies listed here) |
| `obj/project.assets.json` | Resolved dependencies (generated) |
| `bin/` | Build outputs |
| `obj/` | Intermediate build files |

---

## Summary

**The Fix**:
```bash
cd /home/misa/RiderProjects/Sirefi/BlazorApp1
dotnet restore
dotnet build
```

**Why It Works**:
- Restores NuGet packages
- Generates project.assets.json
- Allows build to proceed

**Time to Fix**: ~30 seconds (depending on internet speed)

**Difficulty**: ‚≠ê (Very Easy)

---

## Additional Help

If this solution doesn't work:

1. **Check .NET SDK Version**:
   ```bash
   dotnet --version
   # Should be 9.0.x
   ```

2. **Check Disk Space**:
   ```bash
   df -h
   # Ensure enough space for packages
   ```

3. **Check Permissions**:
   ```bash
   ls -la /home/misa/RiderProjects/Sirefi/BlazorApp1
   # Ensure you have write permissions
   ```

4. **See Complete Guide**:
   - `BUILD_TROUBLESHOOTING.md` - Comprehensive troubleshooting
   - `QUICK_FIX_GUIDE.md` - Quick reference for all errors

---

## Success!

After following these steps, you should be able to:
- ‚úÖ Build the project without errors
- ‚úÖ Run the backend successfully
- ‚úÖ Run the frontend successfully
- ‚úÖ Access the application in browser

**Your build error is now fixed!** üéâ
